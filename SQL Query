CREATE TABLE `board` (
  `board_no` int NOT NULL,
  `board_writer` varchar(50) NOT NULL,
  `board_title` varchar(50) NOT NULL,
  `board_content` varchar(2400) NOT NULL,
  `board_viewcnt` int DEFAULT '0',
  `board_pwd` varchar(100) NOT NULL,
  `board_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `board_newdate` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`board_no`),
  KEY `writer_fk_idx` (`board_writer`),
  CONSTRAINT `writer_fk` FOREIGN KEY (`board_writer`) REFERENCES `member` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
);


CREATE TABLE `comment` (
  `idx` int NOT NULL,
  `board_id` int DEFAULT NULL,
  `member_id` varchar(50) DEFAULT NULL,
  `content` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`idx`),
  KEY `board_id_fk_idx` (`board_id`),
  KEY `member_id_fk_idx` (`member_id`),
  CONSTRAINT `board_id_fk` FOREIGN KEY (`board_id`) REFERENCES `board` (`board_no`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `member_id_fk` FOREIGN KEY (`member_id`) REFERENCES `member` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
);


CREATE TABLE `likecnt` (
  `board_id` int DEFAULT NULL,
  `member_id` varchar(50) DEFAULT NULL,
  `count` int DEFAULT NULL,
  KEY `board_fk_id_idx` (`board_id`),
  KEY `member_fk_id_idx` (`member_id`),
  CONSTRAINT `board_fk_id` FOREIGN KEY (`board_id`) REFERENCES `board` (`board_no`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `member_fk_id` FOREIGN KEY (`member_id`) REFERENCES `member` (`id`) ON DELETE RESTRICT ON UPDATE CASCADE
);


CREATE TABLE `member` (
  `id` varchar(50) NOT NULL,
  `pwd` varchar(200) NOT NULL,
  `email` varchar(200) NOT NULL,
  `phone` varchar(150) NOT NULL,
  `addr` varchar(200) DEFAULT NULL,
  PRIMARY KEY (`id`)
);
